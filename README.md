# Work and Vacation Planning API

Простое API для получения календаря отпусков/командировок и ежедневной загрузки сотрудников.

## Описание

Этот проект реализует API для планирования отпусков и командировок сотрудников, а также отслеживания их ежедневной загрузки. Архитектура приложения построена по принципам чистой архитектуры и легко масштабируется для добавления новых функций.

## Стек технологий

- FastAPI
- Pydantic
- Python 3.12

## Установка и запуск

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Запустите приложение:
```bash
python run.py
```

Приложение будет доступно по адресу: `http://localhost:8000`

## Структура проекта

```
/workspace/
├── app/
│   ├── __init__.py
│   ├── models.py          # Определения моделей Pydantic
│   ├── services.py        # Бизнес-логика
│   └── api.py            # Определения API маршрутов
├── main.py               # Основное приложение FastAPI
├── run.py                # Скрипт запуска
├── requirements.txt      # Зависимости
└── README.md            # Документация (этот файл)
```

## API Эндпоинты

### 1. Календарь отпусков и командировок

**GET** `/api/v1/calendar`

Получить календарь отпусков и командировок для сотрудников в заданном диапазоне дат.

#### Параметры запроса:
- `start_date` (обязательный): Дата начала периода (YYYY-MM-DD)
- `end_date` (обязательный): Дата окончания периода (YYYY-MM-DD)

#### Пример запроса:
```
GET /api/v1/calendar?start_date=2025-11-01&end_date=2025-11-30
```

#### Пример ответа:
```json
[
  {
    "employee": {
      "id": 101,
      "full_name": "Иванов Иван Иванович"
    },
    "events": [
      {
        "type": "vacation",
        "start": "2025-11-05",
        "end": "2025-11-12"
      }
    ]
  }
]
```

### 2. Ежедневная загрузка сотрудников

**GET** `/api/v1/workload`

Получить ежедневную загрузку сотрудников в заданном диапазоне дат.

#### Параметры запроса:
- `start_date` (обязательный): Дата начала периода (YYYY-MM-DD)
- `end_date` (обязательный): Дата окончания периода (YYYY-MM-DD)

#### Пример запроса:
```
GET /api/v1/workload?start_date=2025-11-01&end_date=2025-11-05
```

#### Пример ответа:
```json
{
  "employees": [
    {
      "employee": {
        "id": 101,
        "full_name": "Иванов Иван Иванович"
      },
      "workload": [
        {
          "date": "2025-11-01",
          "percent": 100.0
        }
      ]
    }
  ],
  "total": [
    {
      "date": "2025-11-01",
      "percent": 95.0
    }
  ]
}
```

## Архитектура

Проект использует модульную архитектуру:

- **models.py**: Содержит определения Pydantic моделей для валидации данных
- **services.py**: Содержит бизнес-логику приложения, изолированную от API слоя
- **api.py**: Содержит определения маршрутов API
- **main.py**: Основное приложение FastAPI с настройками

## Масштабируемость

Архитектура проекта позволяет легко добавлять новые функции:

- Новые эндпоинты можно добавлять в `api.py`
- Новая бизнес-логика может быть добавлена в `services.py`
- Новые модели данных добавляются в `models.py`
- Для интеграции с базой данных достаточно модифицировать сервисы

## Тестирование

Для тестирования API можно использовать встроенный интерфейс Swagger, доступный по адресу: `http://localhost:8000/docs`